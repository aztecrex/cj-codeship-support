#!/bin/bash

set -e

if [ "$1" = "" ]; then
  cat << EOT >&2
Runs git with supplied arguments. Mount project directory at /project.
You can supply an SSH private repository key in the SSH_KEY environment
variable. Github hosts are added automatically to known_hosts.

Special argument "sh" drops you into a shell.

EOT
  git version >&2
elif [ "$1" = "sh" ]; then
  exec /bin/bash
else
  exec entrypoint.git-base git "$@"
fi
